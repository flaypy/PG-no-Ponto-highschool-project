<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PG no Ponto - Melhorando Praia Grande Juntos</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Substitua os scripts do Firebase por isto: -->
<script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-storage-compat.js"></script>
    <style>
        .navbar .dropdown-menu {
    background-color: var(--primary-color);
    border: 1px solid rgba(255,255,255,0.1);
}

.navbar .dropdown-item {
    color: rgba(255,255,255,0.8);
}

.navbar .dropdown-item:hover {
    background-color: rgba(255,255,255,0.1);
    color: white;
}
    #problemType:invalid {
    border-color: #dc3545;
  }
  
  #problemType:valid {
    border-color: #28a745;
  }       /* Estilo para o autocomplete */
        /* Estilo para o autocomplete */
  .pac-container {
    z-index: 1051 !important;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    border-radius: 0 0 4px 4px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  }
  
  .pac-item {
    padding: 8px 12px;
    cursor: pointer;
    border-top: 1px solid #e6e6e6;
  }
  
  .pac-item:hover {
    background-color: #f5f5f5;
  }
  
  .pac-item-query {
    font-size: 1rem;
    color: var(--dark-color);
  }
  
  /* Estilo para o input */
  #addressInput {
    width: 100%;
    padding: 0.375rem 0.75rem;
    font-size: 1rem;
    line-height: 1.5;
    color: #495057;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid #ced4da;
    border-radius: 0.25rem;
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
  }
  
  #addressInput:focus {
    border-color: #80bdff;
    outline: 0;
    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
  }
        
        /* Estilo para o botão de localização */
        #locationButton {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        #locationButton:hover {
            background-color: #e9ecef;
        }
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: var(--dark-color);
        }
        
        .navbar {
            background-color: var(--primary-color);
        }
        
        .btn-primary {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
            border-color: #2980b9;
        }
        
        .hero-section {
            background: linear-gradient(rgba(44, 62, 80, 0.8), rgba(44, 62, 80, 0.8)), url('https://turismo.praiagrande.sp.gov.br/wp-content/uploads/2021/05/praias-2-1500x630.jpg');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 100px 0;
        }
        
        .feature-icon {
            font-size: 2.5rem;
            color: var(--secondary-color);
            margin-bottom: 1rem;
        }
        
        .problem-card {
            transition: transform 0.3s;
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .problem-card:hover {
            transform: translateY(-5px);
        }
        
        .report-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 1.5rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        footer {
            background-color: var(--primary-color);
            color: white;
            font-style: var(--light-color);
        }
        
        .map-container {
            height: 400px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
    </style>
    <style>
        /* Adicione ao seu CSS existente */
        gmpx-place-autocomplete {
          width: 100%;
          height: 38px; /* Ajuste para combinar com seus outros inputs */
          padding: 6px 12px;
          font-size: 1rem;
          line-height: 1.5;
          color: #495057;
          background-color: #fff;
          background-clip: padding-box;
          border: 1px solid #ced4da;
          border-radius: 4px;
          transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        
        gmpx-place-autocomplete:focus {
          border-color: #80bdff;
          outline: 0;
          box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }
      </style>
</head>
<body>
    <!-- Barra de Navegação -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-map-marked-alt me-2"></i>
                PG no Ponto
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#">Início</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#como-funciona">Como Funciona</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#mapa">Mapa</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#estatisticas">Estatísticas</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#sobre">Sobre</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#faq">FAQ</a>
                    </li>
                    <li class="nav-item dropdown" id="authDropdown">
                        <a class="nav-link btn btn-outline-light ms-2 dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-user me-1"></i> <span id="authStatus">Entrar</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="/login" id="loginLink">Entrar</a></li>
                            <li><a class="dropdown-item" href="/cadastro" id="registerLink">Cadastrar</a></li>
                            <li><a class="dropdown-item d-none" href="/dashboard" id="accountLink">Minha Conta</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item d-none" href="#" id="logoutLink">Sair</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Seção Hero -->
    <section class="hero-section text-center">
        <div class="container">
            <h1 class="display-4 fw-bold mb-4">Juntos por uma Praia Grande melhor</h1>
            <p class="lead mb-5">Reporte problemas de infraestrutura e acompanhe a solução em tempo real</p>
            <a href="#reportar" class="btn btn-primary btn-lg px-4 me-2">
                <i class="fas fa-plus-circle me-2"></i>Reportar Problema
            </a>
            <a href="#mapa" class="btn btn-outline-light btn-lg px-4">
                <i class="fas fa-map me-2"></i>Ver Mapa
            </a>
        </div>
    </section>

    <!-- Seção Como Funciona -->
    <section id="como-funciona" class="py-5 bg-light">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="fw-bold">Como Funciona</h2>
                <p class="lead text-muted">Três passos simples para contribuir</p>
            </div>
            <div class="row g-4">
                <div class="col-md-4 text-center">
                    <div class="feature-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <h3>1. Encontre</h3>
                    <p class="text-muted">Identifique um problema de infraestrutura em sua rua, bairro ou cidade.</p>
                </div>
                <div class="col-md-4 text-center">
                    <div class="feature-icon">
                        <i class="fas fa-camera"></i>
                    </div>
                    <h3>2. Reporte</h3>
                    <p class="text-muted">Tire uma foto e envie pelo site ou app com a localização exata.</p>
                </div>
                <div class="col-md-4 text-center">
                    <div class="feature-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3>3. Acompanhe</h3>
                    <p class="text-muted">Receba atualizações e veja quando o problema for resolvido.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Seção Problemas Comuns -->
    <section class="py-5">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="fw-bold">Problemas que você pode reportar</h2>
                <p class="lead text-muted">Ajude a melhorar nossa cidade</p>
            </div>
            <div class="row g-4">
                <div class="col-md-3">
                    <div class="card problem-card h-100">
                        <img src="https://cdn.diariodolitoral.com.br/img/pc/920/610/dn_arquivo/2024/08/foto-mostra-buraco-no-meio-de-avenida-em-santos.jpeg" class="card-img-top" alt="Buraco na rua">
                        <div class="card-body">
                            <h5 class="card-title">Buracos na via</h5>
                            <p class="card-text">Reporte buracos em ruas e avenidas que precisam de reparo.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card problem-card h-100">
                        <img src="https://i.ytimg.com/vi/yO-VJrXNTQ8/maxresdefault.jpg" class="card-img-top" alt="Iluminação pública">
                        <div class="card-body">
                            <h5 class="card-title">Iluminação pública</h5>
                            <p class="card-text">Lâmpadas queimadas ou postes com problemas de iluminação.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card problem-card h-100">
                        <img src="https://cdn.bs9.com.br/upload/dn_arquivo/2024/12/01_28.jpg" class="card-img-top" alt="Limpeza urbana">
                        <div class="card-body">
                            <h5 class="card-title">Limpeza urbana</h5>
                            <p class="card-text">Lixo acumulado, terrenos baldios com mato alto ou entulho.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card problem-card h-100">
                        <img src="https://costanorte.com.br/media/_versions/legacy/28/98/285698_widelg.jpg" class="card-img-top" alt="Sinalização">
                        <div class="card-body">
                            <h5 class="card-title">Sinalização</h5>
                            <p class="card-text">Placas de trânsito danificadas ou falta de sinalização.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Seção Mapa -->
    <section id="mapa" class="py-5 bg-light">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="fw-bold">Problemas Reportados</h2>
                <p class="lead text-muted">Veja os problemas reportados em tempo real</p>
            </div>
            <div class="map-container bg-white p-3 mb-4">
                <!-- Mapa será inserido aqui via API (Google Maps ou OpenStreetMap) -->
                <div class="d-flex align-items-center justify-content-center h-100">
                    <div class="text-center">
                        <i class="fas fa-map-marked-alt fa-4x text-muted mb-3"></i>
                        <h4>Mapa interativo</h4>
                        <p class="text-muted">Aqui será exibido o mapa com todos os problemas reportados</p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3">
                        <span class="badge bg-danger me-2" style="width: 20px; height: 20px;"></span>
                        <span>Problemas não resolvidos</span>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="d-flex align-items-center mb-3">
                        <span class="badge bg-success me-2" style="width: 20px; height: 20px;"></span>
                        <span>Problemas resolvidos</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Seção Estatísticas -->
<!-- Seção Estatísticas (versão para site em lançamento) -->
<section id="estatisticas" class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold">Nosso Impacto</h2>
            <p class="lead text-muted">Sua contribuição faz a diferença</p>
        </div>
        <div class="row text-center">
            <div class="col-md-3">
                <h3 class="display-4 fw-bold text-primary">0</h3>
                <p class="text-muted">Problemas reportados</p>
            </div>
            <div class="col-md-3">
                <h3 class="display-4 fw-bold text-success">0</h3>
                <p class="text-muted">Problemas resolvidos</p>
            </div>
            <div class="col-md-3">
                <h3 class="display-4 fw-bold text-warning">0</h3>
                <p class="text-muted">Em análise</p>
            </div>
            <div class="col-md-3">
                <h3 class="display-4 fw-bold text-danger">0</h3>
                <p class="text-muted">Recusados</p>
            </div>
        </div>
        <div class="text-center mt-4">
            <p class="text-muted">Seja o primeiro a reportar um problema!</p>
            <a href="#reportar" class="btn btn-primary">
                <i class="fas fa-plus-circle me-2"></i>Reportar Agora
            </a>
        </div>
    </div>
</section>

    <!-- Seção Reportar -->
    <section id="reportar" class="py-5 bg-light">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="card shadow">
                        <div class="card-body p-5">
                            <h2 class="card-title text-center mb-4">Reportar Problema</h2>
                            
<form id="reportForm">
  <div class="mb-3">
    <label for="problemType" class="form-label">Tipo de Problema</label>
    <select class="form-select" id="problemType" required>
      <option selected disabled>Selecione...</option>
      <option>Buraco na via</option>
      <option>Iluminação pública</option>
      <option>Limpeza urbana</option>
      <option>Sinalização</option>
      <option>Esgoto entupido</option>
      <option>Outro</option>
    </select>
  </div>
  
  <div class="mb-3">
    <label class="form-label">Localização</label>
    <div class="input-group mb-2">
      <!-- Substitua o input antigo por este novo componente -->
      <gmpx-place-autocomplete 
        id="autocomplete"
        class="form-control"
        placeholder="Digite o endereço"
        required
      ></gmpx-place-autocomplete>
      <button class="btn btn-outline-secondary" type="button" id="locationButton">
        <i class="fas fa-crosshairs"></i> Usar minha localização
      </button>
    </div>
    <div id="map" style="height: 300px; border-radius: 10px;"></div>
  </div>

  <div class="mb-3">
    <label for="problemDescription" class="form-label">Descrição</label>
    <textarea class="form-control" id="problemDescription" rows="3" placeholder="Descreva o problema com detalhes" required></textarea>
  </div>
  <div class="mb-3">
    <label for="problemPhoto" class="form-label">Foto do Problema</label>
    <input class="form-control" type="file" id="problemPhoto" accept="image/*" required>
    <div class="form-text">Tire uma foto clara do problema para ajudar na identificação.</div>
  </div>
  <div class="d-grid">
    <button type="submit" class="btn btn-primary btn-lg">
      <i class="fas fa-paper-plane me-2"></i>Enviar Reporte
    </button>
  </div>
</form>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Seção Sobre -->
    <section id="sobre" class="py-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <h2 class="fw-bold mb-4">Sobre o PG no Ponto</h2>
                    <p class="lead">Uma plataforma colaborativa para melhorar a infraestrutura de Praia Grande.</p>
                    <p>O PG no Ponto conecta cidadãos e poder público para identificar e resolver problemas de infraestrutura urbana de forma rápida e transparente.</p>
                    <p>Nosso objetivo é tornar Praia Grande uma cidade mais bem cuidada através da participação ativa da comunidade.</p>
                    <div class="d-flex mt-4">
                        <a href="#" class="btn btn-outline-primary me-2">
                            <i class="fab fa-facebook-f me-1"></i> Facebook
                        </a>
                        <a href="#" class="btn btn-outline-info me-2">
                            <i class="fab fa-twitter me-1"></i> Twitter
                        </a>
                        <a href="#" class="btn btn-outline-danger">
                            <i class="fab fa-instagram me-1"></i> Instagram
                        </a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <img src="https://www.praiagrande.sp.gov.br/arquivos/foto/58868.jpg" class="img-fluid rounded shadow" alt="Cidade">
                </div>
            </div>
        </div>
    </section>
            <!-- Seção FAQ -->
    <section id="faq" class="py-5 bg-light">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="fw-bold">Perguntas Frequentes</h2>
                <p class="lead text-muted">Tire suas dúvidas sobre o PG no Ponto</p>
            </div>
            
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="accordion" id="faqAccordion">
                        <!-- Pergunta 1 -->
                        <div class="accordion-item mb-3 border-0 shadow-sm">
                            <h3 class="accordion-header" id="headingOne">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
                                    Como posso reportar um problema na cidade?
                                </button>
                            </h3>
                            <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Você pode reportar problemas de três maneiras: 1) Pelo formulário no nosso site, 2) Através do aplicativo PG no Ponto (disponível para Android e iOS), ou 3) Ligando para a Central 156 da Prefeitura e mencionando que seu reporte veio através do PG no Ponto.
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pergunta 2 -->
                        <div class="accordion-item mb-3 border-0 shadow-sm">
                            <h3 class="accordion-header" id="headingTwo">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
                                    Quais tipos de problemas posso reportar?
                                </button>
                            </h3>
                            <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Você pode reportar diversos problemas de infraestrutura urbana como: buracos nas vias, iluminação pública defeituosa, lixo acumulado, vazamentos de água, calçadas danificadas, sinalização de trânsito com problemas, parques e praças que necessitem de manutenção, entre outros. Nosso sistema categoriza automaticamente seu reporte para direcionar ao órgão responsável.
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pergunta 3 -->
                        <div class="accordion-item mb-3 border-0 shadow-sm">
                            <h3 class="accordion-header" id="headingThree">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree">
                                    Quanto tempo leva para um problema ser resolvido?
                                </button>
                            </h3>
                            <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    O tempo de resolução varia conforme a complexidade do problema e a demanda dos órgãos responsáveis. Problemas simples como lixo acumulado são geralmente resolvidos em até 3 dias úteis, enquanto reparos mais complexos como buracos em vias podem levar até 15 dias. Você receberá atualizações por e-mail ou pelo app sobre o status do seu reporte.
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pergunta 4 -->
                        <div class="accordion-item mb-3 border-0 shadow-sm">
                            <h3 class="accordion-header" id="headingFour">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour">
                                    Preciso me identificar para fazer um reporte?
                                </button>
                            </h3>
                            <div id="collapseFour" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Não é obrigatório se identificar para reportar problemas comuns. No entanto, reportes anônimos não permitem que entremos em contato para mais informações ou para informar sobre a resolução. Cadastrar-se traz benefícios como histórico de reportes, notificações sobre o status e participação no ranking de cidadãos mais ativos.
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pergunta 5 -->
                        <div class="accordion-item mb-3 border-0 shadow-sm">
                            <h3 class="accordion-header" id="headingFive">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive">
                                    Como o PG no Ponto funciona com a Prefeitura?
                                </button>
                            </h3>
                            <div id="collapseFive" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Temos uma parceria oficial com a Prefeitura Municipal de Praia Grande. Todos os reportes são enviados automaticamente para o sistema da prefeitura e direcionados aos órgãos responsáveis. Além disso, geramos relatórios mensais que ajudam o poder público a priorizar as áreas com mais demandas e melhorar o planejamento urbano.
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pergunta 6 -->
                        <div class="accordion-item mb-3 border-0 shadow-sm">
                            <h3 class="accordion-header" id="headingSix">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSix">
                                    Existe algum benefício em reportar problemas?
                                </button>
                            </h3>
                            <div id="collapseSix" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Sim! Além de contribuir para uma cidade melhor, usuários cadastrados acumulam pontos por cada reporte válido. Esses pontos podem ser trocados por benefícios como descontos em estabelecimentos parceiros, participação em sorteios e reconhecimento como "Cidadão Destaque" mensal. Quanto mais ativo você for, mais benefícios recebe!
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center mt-5">
                        <p class="lead">Ainda tem dúvidas?</p>
                        <a href="#contato" class="btn btn-primary">
                            <i class="fas fa-envelope me-2"></i>Entre em Contato
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Rodapé -->
    <footer class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4 mb-md-0">
                    <h5 class="text-white mb-4">
                        <i class="fas fa-map-marked-alt me-2"></i>PG no Ponto
                    </h5>
                    <p class="text-white">Juntos por uma Praia Grande melhor.</p>
                </div>
                <div class="col-md-2 mb-4 mb-md-0">
                    <h5 class="text-white mb-4">Links</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-white">Início</a></li>
                        <li class="mb-2"><a href="#como-funciona" class="text-white">Como Funciona</a></li>
                        <li class="mb-2"><a href="#mapa" class="text-white">Mapa</a></li>
                        <li class="mb-2"><a href="#estatisticas" class="text-white">Estatísticas</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-4 mb-md-0">
                    <h5 class="text-white mb-4">Contato</h5>
                    <ul class="list-unstyled text-white">
                        <li class="mb-2"><i class="fas fa-envelope me-2" style="color: white;"></i> contato@pgnoponto.com.br</li>
                        <li class="mb-2"><i class="fas fa-phone me-2"style="color: white;"></i> (13) 1234-5678</li>
                        <li><i class="fas fa-map-marker-alt me-2"style="color: white;"></i> Praia Grande, SP</li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h5 class="text-white mb-4">Baixe o App</h5>
                    <div class="d-flex flex-column">
                        <a href="#" class="btn btn-dark mb-2">
                            <i class="fab fa-google-play me-2"></i> Google Play
                        </a>
                        <a href="#" class="btn btn-dark">
                            <i class="fab fa-apple me-2"></i> App Store
                        </a>
                    </div>
                </div>
            </div>
        
            <hr class="my-4 bg-secondary">
            <div class="row">
                <div class="col-md-6 text-center text-md-start">
                    <p class="text-white mb-0" style="color: white;">&copy; 2025 PG no Ponto. Todos os direitos reservados.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <a href="#" class="text-white me-3">Termos de Uso</a>
                    <a href="#" class="text-white">Política de Privacidade</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Botão Flutuante de Reporte -->
    <a href="#reportar" class="btn btn-primary report-btn d-flex align-items-center justify-content-center">
        <i class="fas fa-plus"></i>
    </a>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Inicialização do Google Maps API
        (g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})
        ({key: "AIzaSyDyrb2YQVuLyFNlbZHNVBflsPDN6ueYkS0", v: "beta", libraries: ["places", "marker"]});
      </script>
    <!-- Scripts do Firebase (MANTENHA ESTES) -->
<script defer src="/__/firebase/11.6.1/firebase-app-compat.js"></script>
<script defer src="/__/firebase/11.6.1/firebase-auth-compat.js"></script>
<script defer src="/__/firebase/11.6.1/firebase-firestore-compat.js"></script>
<script defer src="/__/firebase/11.6.1/firebase-storage-compat.js"></script>
<script defer src="/__/firebase/init.js?useEmulator=false"></script>

<!-- CÓDIGO CORRIGIDO DO GOOGLE MAPS (COLE AQUI) -->
<script>
  // Carrega a API do Google Maps
  (g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})
  ({key: "AIzaSyDyrb2YQVuLyFNlbZHNVBflsPDN6ueYkS0", v: "beta", libraries: ["places", "marker"], mapIds: ["3f69809de9860f5f"]});

  document.addEventListener('DOMContentLoaded', async () => {
    try {
      // Carrega as bibliotecas do Google Maps
      const { Map } = await google.maps.importLibrary("maps");
      const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");
      const { PlaceAutocomplete } = await google.maps.importLibrary("places");
      const { Geocoder } = await google.maps.importLibrary("geocoding");

      // Elementos do DOM
      const mapElement = document.getElementById("map");
      const locationButton = document.getElementById("locationButton");
      
      // Substitui o gmpx-place-autocomplete por um input tradicional
      const autocompleteContainer = document.querySelector('gmpx-place-autocomplete');
      const addressInput = document.createElement('input');
      addressInput.type = 'text';
      addressInput.id = 'addressInput';
      addressInput.className = 'form-control';
      addressInput.placeholder = 'Digite o endereço';
      addressInput.required = true;
      autocompleteContainer.replaceWith(addressInput);

      // Configuração inicial
      const defaultPosition = { lat: -24.0058, lng: -46.4028 };
      
      // Inicializa o mapa
      const map = new Map(mapElement, {
        center: defaultPosition,
        zoom: 15,
        mapId: "3f69809de9860f5f",
        mapTypeControl: true,
        mapTypeControlOptions: {
          style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,
          mapTypeIds: ["roadmap", "satellite"]
        }
      });

      // Cria um marcador arrastável
      const marker = new AdvancedMarkerElement({
        map: map,
        position: defaultPosition,
        title: "Local do Problema",
        gmpDraggable: true
      });

      // Inicializa o autocomplete tradicional (que funciona)
      const autocomplete = new google.maps.places.Autocomplete(addressInput, {
        fields: ["formatted_address", "geometry"],
        componentRestrictions: { country: "br" }
      });

      // Função para atualizar o endereço baseado na posição
      const updateAddressFromPosition = async (position) => {
        const geocoder = new Geocoder();
        geocoder.geocode({ location: position }, (results, status) => {
          if (status === 'OK' && results[0]) {
            addressInput.value = results[0].formatted_address;
          }
        });
      };

      // Atualiza o endereço quando o marcador é arrastado
      marker.addListener('dragend', async () => {
        await updateAddressFromPosition(marker.position);
      });

      // Listener para quando um lugar é selecionado no autocomplete
      autocomplete.addListener('place_changed', () => {
        const place = autocomplete.getPlace();
        if (place.geometry) {
          map.setCenter(place.geometry.location);
          marker.position = place.geometry.location;
        }
      });

      // Botão de localização - versão corrigida
      locationButton.addEventListener("click", async () => {
        if (navigator.geolocation) {
          try {
            const position = await new Promise((resolve, reject) => {
              navigator.geolocation.getCurrentPosition(resolve, reject);
            });
            
            const pos = { 
              lat: position.coords.latitude, 
              lng: position.coords.longitude 
            };
            
            map.setCenter(pos);
            marker.position = pos;
            await updateAddressFromPosition(pos);
            
          } catch (error) {
            console.error("Erro na geolocalização:", error);
            alert("Erro ao obter localização. Verifique as permissões do navegador.");
          }
        } else {
          alert("Seu navegador não suporta geolocalização.");
        }
      });

      // Adiciona clique no mapa para mover o marcador
      map.addListener('click', async (e) => {
        marker.position = e.latLng;
        await updateAddressFromPosition(e.latLng);
      });

      // Inicializa com um endereço padrão
      await updateAddressFromPosition(defaultPosition);

      // =============================================
      // INTEGRAÇÃO COM FIREBASE - PARTE NOVA
      // =============================================

      // Configuração do Firebase
      const db = firebase.firestore();
      const storage = firebase.storage();

      // Função para upload de imagem
      const uploadImage = async (file) => {
  const storageRef = storage.ref();
  const fileRef = storageRef.child(`reportes/${Date.now()}_${file.name}`);
  
    const metadata = {
        contentType: file.type,
        customMetadata: {
        uploadedBy: firebase.auth().currentUser ? firebase.auth().currentUser.uid : 'anonymous',
        originalFilename: file.name
    }
  };

  await fileRef.put(file, metadata);
  return await fileRef.getDownloadURL();
};

      // Handler de envio do formulário
      document.getElementById('reportForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    // Validação do tipo de problema
    const problemTypeSelect = document.getElementById('problemType');
    if (problemTypeSelect.selectedIndex === 0) { // Verifica se a primeira opção ("Selecione...") está selecionada
      alert('Por favor, selecione um tipo de problema válido');
      problemTypeSelect.focus();
      return; // Impede o envio do formulário
    }

    // Mostrar loading
    const submitBtn = e.target.querySelector('button[type="submit"]');
    const originalBtnText = submitBtn.innerHTML;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Enviando...';
    submitBtn.disabled = true;

  try {
    // Validações iniciais
    const photoFile = document.getElementById('problemPhoto').files[0];
    if (!photoFile) {
      throw new Error('Por favor, selecione uma foto do problema');
    }
    if (!firebase.auth().currentUser) {
  throw new Error('Por favor, faça login para enviar reportes');
}

    // Coletar dados do formulário
    const problemType = document.getElementById('problemType').value;
    const description = document.getElementById('problemDescription').value;
    
    // Obter localização
    if (!marker.position) {
      throw new Error('Por favor, selecione uma localização no mapa');
    }
    
    const location = {
      lat: marker.position.lat,
      lng: marker.position.lng,
      address: addressInput.value || 'Endereço não especificado'
    };

    console.log('Iniciando upload da imagem...');
    const photoURL = await uploadImage(photoFile);
    console.log('Imagem enviada:', photoURL);

    // Verifica se o usuário está autenticado


    console.log('Preparando dados para Firestore...');
    const reportData = {
      tipo: problemType,
      descricao: description,
      localizacao: new firebase.firestore.GeoPoint(location.lat, location.lng),
      endereco: location.address,
      foto: photoURL,
      status: 'pendente',
      data: firebase.firestore.FieldValue.serverTimestamp(),
      userId: firebase.auth().currentUser ? firebase.auth().currentUser.uid : 'anonimo'
    };

    console.log('Enviando para Firestore...', reportData);
    await db.collection('reportes').add(reportData);
    console.log('Reporte enviado com sucesso!');

    // Feedback visual de sucesso
    submitBtn.innerHTML = '<i class="fas fa-check"></i> Enviado com sucesso!';
    setTimeout(() => {
      submitBtn.innerHTML = originalBtnText;
      submitBtn.disabled = false;
    }, 2000);

    // Resetar formulário
    document.getElementById('reportForm').reset();
    map.setCenter(defaultPosition);
    marker.position = defaultPosition;
    addressInput.value = '';

  } catch (error) {
    console.error('Erro detalhado:', error);
    
    // Mostrar mensagem de erro detalhada
    submitBtn.innerHTML = `<i class="fas fa-exclamation-triangle"></i> Erro: ${error.message}`;
    setTimeout(() => {
      submitBtn.innerHTML = originalBtnText;
      submitBtn.disabled = false;
    }, 3000);
    
    // Adicional: exibir erro no console para depuração
    if (error.details) {
      console.error('Detalhes do erro Firebase:', error.details);
    }
  }
});

    } catch (error) {
      console.error("Erro no mapa:", error);
    }
  });  
</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        firebase.auth().onAuthStateChanged((user) => {
            const authStatus = document.getElementById('authStatus');
            const loginLink = document.getElementById('loginLink');
            const registerLink = document.getElementById('registerLink');
            const logoutLink = document.getElementById('logoutLink');
            const accountLink = document.getElementById('accountLink');

            if (user) {
                // Usuário logado
                authStatus.textContent = user.displayName || "Minha Conta";
                loginLink.classList.add('d-none');
                registerLink.classList.add('d-none');
                logoutLink.classList.remove('d-none');
                accountLink.classList.remove('d-none');
            } else {
                // Usuário não logado
                authStatus.textContent = "Entrar";
                loginLink.classList.remove('d-none');
                registerLink.classList.remove('d-none');
                logoutLink.classList.add('d-none');
                accountLink.classList.add('d-none');
            }
        });

        document.getElementById('logoutLink')?.addEventListener('click', (e) => {
            e.preventDefault();
            firebase.auth().signOut().then(() => {
                window.location.href = "/";
            });
        });
    });
</script>
</body>
</html>